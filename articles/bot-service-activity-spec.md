---
title: Bot Framework 사양 | Microsoft Docs
description: Bot Framework 사양
author: RobStand
ms.author: kamrani
manager: kamrani
ms.topic: article
ms.prod: bot-framework
ms.date: 03/07/2018
ms.openlocfilehash: 0406d489f7d1e27131b4b01411e86850ca4a17b8
ms.sourcegitcommit: f576981342fb3361216675815714e24281e20ddf
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/18/2018
ms.locfileid: "39300709"
---
# <a name="bot-framework----activity"></a>Bot Framework - 활동

## <a name="abstract"></a>요약

Bot Framework 활동 스키마는 사람과 자동화된 소프트웨어에 의해 수행되는 대화형 작업의 응용 프로그램 수준 표현입니다. 스키마에는 텍스트, 멀티미디어 및 소셜 상호 작용, 입력 표시기 등의 비콘텐츠 작업을 전달하기 위한 프로비전이 포함되어 있습니다.

이 스키마는 Bot Framework 프로토콜 내에서 사용되며, Microsoft 채팅 시스템 및 다양한 소스의 상호 운용 가능한 봇과 클라이언트에 의해 구현됩니다.

## <a name="table-of-contents"></a>목차

1. [소개](#introduction)
2. [기본 활동 구조](#basic-activity-structure)
3. [메시지 활동](#message-activity)
4. [연락 관계 업데이트 활동](#contact-relation-update-activity)
5. [대화 업데이트 활동](#conversation-update-activity)
6. [대화 종료 활동](#end-of-conversation-activity)
7. [이벤트 활동](#event-activity)
8. [호출 활동](#invoke-activity)
9. [설치 업데이트 활동](#installation-update-activity)
10. [메시지 삭제 활동](#message-delete-activity)
11. [메시지 업데이트 활동](#message-update-activity)
12. [메시지 반응 활동](#message-reaction-activity)
13. [입력 활동](#typing-activity)
14. [복합 형식](#complex-types)
15. [참조](#references)
16. [부록 I - 변경 내용](#appendix-i---changes)
17. [부록 II - 비 IRI 엔터티 형식](#appendix-ii---non-iri-entity-types)
18. [부록 III - 호출 활동을 사용하는 프로토콜](#appendix-iii---protocols-using-the-invoke-activity)

## <a name="introduction"></a>소개

### <a name="overview"></a>개요

Bot Framework 활동 스키마는 채팅 응용 프로그램, 메일 및 기타 텍스트 상호 작용 프로그램 내에서 사람과 자동화된 소프트웨어에 의해 수행되는 대화형 동작을 나타냅니다. 각 Activity 개체는 입력 필드를 포함하고 단일 작업(가장 일반적인 동작은 텍스트 콘텐츠 보내기)을 나타낼 뿐 아니라 멀티미디어 첨부 파일 및 “좋아요” 단추, 입력 표시기 등의 비콘텐츠 동작을 포함합니다.

이 문서에서는 각 활동 형식의 의미를 제공하고 포함될 수 있는 필수 및 선택적 필드에 대해 설명합니다. 또한 클라이언트 및 서버의 역할을 정의하고, 각 참가자가 관리하는 필드 및 무시할 수 있는 필드에 대한 지침을 제공합니다.

이 사양에는 다음 세 가지 중요한 역할이 있습니다. 클라이언트는 사용자를 대신해서 활동을 보내고 받습니다. 봇은 활동을 보내고 받으며, 일반적으로 자동화됩니다. 채널은 활동을 저장하고 클라이언트와 봇 간에 전달합니다.

이 사양에서는 역할 간에 활동이 전송되어야 하지만, 해당 전송의 정확한 특성은 여기서 설명하지 않습니다.

간결한 설명을 위해 시각적 대화형 카드는 이 사양에서 정의되지 않습니다. 대신, [적응형 카드](https://adaptivecards.io)[[11](#references)] 사양을 참조하세요. 이 카드와 기타 정의되지 않은 카드 종류는 Bot Framework 활동에 첨부 파일로 포함할 수 있습니다.

### <a name="requirements"></a>요구 사항

이 문서의 키워드인 “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY” 및 “OPTIONAL”은 [RFC 2119](https://tools.ietf.org/html/rfc2119)[[1](#references)]에서 설명한 대로 해석되어야 합니다.

구현하는 프로토콜의 MUST 또는 REQUIRED 수준 요구 사항을 하나 이상 충족하지 못하는 구현은 규격이 아닙니다. 해당 프로토콜에 대한 모든 MUST 또는 REQUIRED 수준과 모든 SHOULD 수준 요구 사항을 충족하는 구현은 “무조건부 규격”이라고 합니다. 해당 프로토콜에 대한 모든 MUST 수준 요구 사항을 충족하지만 일부 SHOULD 수준 요구 사항을 충족하지 않는 구현은 “조건부 규격”이라고 합니다.

### <a name="numbered-requirements"></a>번호가 매겨진 요구 사항

양식 표식 `RXXXX`로 시작하는 줄은 번호로 참조할 수 있도록 작성된 특정 요구 사항으로, 이 문서에서는 설명하지 않습니다. `RXXXX` 줄 외부에 작성된 규격 문과 가중치는 같습니다.

`R1000`: 이 사양의 편집자가 `RXXXX` 요구 사항을 새로 추가할 수 있습니다. 문서의 흐름을 유지하는 숫자 `RXXXX` 값을 찾아야 합니다.

`R1001`: 편집자가 기존 `RXXXX` 요구 사항의 번호를 다시 매길 수 없습니다.

`R1002`: 편집자가 `RXXXX` 요구 사항을 삭제하거나 수정할 수 있습니다. 수정하는 경우, 요구 사항의 주제가 대체로 보존되면 편집자가 기존 `RXXXX` 값을 유지해야 합니다.

`R1003`: 편집자가 사용 중지된 `RXXXX` 값을 다시 사용하면 안 됩니다. 이 문서의 끝에서 삭제된 값 목록을 유지 관리할 수 있습니다.

### <a name="terminology"></a>용어

활동
> 봇, 채널 또는 클라이언트에 의해 표현된 동작으로, 활동 스키마를 준수합니다.

channel
> 활동을 보내고 받으며, 채팅 또는 응용 프로그램 동작으로 변환하거나 그 반대로 변환하는 소프트웨어입니다. 채널은 활동 데이터에 대한 신뢰할 수 있는 저장소입니다.

봇
> 활동을 보내고 받으며, 자동, 반자동 또는 완전 수동 응답을 생성하는 소프트웨어입니다. 봇에는 채널에 등록된 엔드포인트가 있습니다.

클라이언트
> 일반적으로 사용자를 대신해서 활동을 보내고 받는 소프트웨어입니다. 클라이언트에는 엔드포인트가 없습니다.

보낸 사람
> 활동을 전송하는 소프트웨어입니다.

받는 사람
> 활동을 수락하는 소프트웨어입니다.

endpoint
> 봇 또는 채널이 활동을 받을 수 있는, 프로그래밍 방식으로 주소 지정 가능한 위치입니다.

address
> 사용자 또는 봇에 연결할 수 있는 식별자 또는 주소입니다.

필드
> 활동 또는 중첩된 개체 내에서 명명된 값입니다.

### <a name="overall-organization"></a>전체 조직

Activity 개체는 이름/값 쌍의 단순 목록으로, 일부는 기본 개체이고 일부는 복합(중첩됨) 개체입니다. Activity 개체는 일반적으로 JSON 형식으로 표현되지만, .Net 또는 JavaScript의 메모리 내 데이터 구조에 프로젝션될 수도 있습니다.

활동 `type` 필드는 활동 및 활동에 포함된 필드의 의미를 제어합니다. 참가자의 역할(클라이언트, 봇, 또는 채널)에 따라 각 필드는 필수 또는 선택 사항이거나 무시됩니다. 예를 들어, `id` 필드는 채널에 의해 관리되며, 일부 상황에서 필수이지만 봇이 보내는 경우에는 무시됩니다.

활동 및 참가자의 ID를 설명하는 필드(예: `type` 및 `from` 필드)는 모든 활동에서 공유됩니다. 많은 프로그래밍 언어에서는 이러한 필드를 더 구체적인 다른 활동 형식이 파생되는 핵심 기본 형식에 구성하는 것이 편리합니다.

활동을 저장 또는 전송할 때 일부 필드는 전송 메커니즘 내에서 복제될 수 있습니다. 예를 들어, HTTP POST를 통해 대화 ID를 포함하는 URL에 활동을 전송하는 경우 활동 본문에 값이 없어도 받는 사람이 해당 값을 유추할 수 있습니다. 이 문서에서는 단순히 이러한 필드에 대한 추상적 요구 사항을 설명하며, 값을 명시적으로 선언해야 하는지 여부나 암시적 값 또는 유추된 값이 허용되는지 여부를 설정하는 것은 제어 프로토콜입니다.

봇 또는 클라이언트가 채널에 활동을 보낼 때는 일반적으로 활동을 기록하라는 요청입니다. 채널이 봇 또는 클라이언트에 활동을 보낼 때는 일반적으로 활동이 이미 기록되었다는 알림입니다.

## <a name="basic-activity-structure"></a>기본 활동 구조

이 섹션에서는 Activity 개체의 기본 구조에 대한 요구 사항을 정의합니다.

Activity 개체에는 필드라는 이름/값 쌍의 단순 목록이 포함되어 있습니다. 필드는 기본 형식일 수 있습니다. JSON이 일반 교환 형식으로 사용되며, 항상 모든 활동을 JSON으로 직렬화해야 하는 것은 아니지만 JSON으로 직렬화할 수 있어야 합니다. 이렇게 하면 구현에서 간단한 규칙 집합을 사용하여 알려진 활동 필드와 알 수 없는 활동 필드를 처리할 수 있습니다.

`R2001`: 필드 고유성 제약 조건 등의 준수를 포함하여 활동을 JSON 형식으로 직렬화할 수 있어야 합니다.

`R2002`: 필수는 아니지만, 받는 사람이 대/소문자가 잘못된 필드 이름을 허용할 수 있습니다. 받는 사람이 올바른 대/소문자의 필드가 포함되지 않은 활동을 거부할 수도 있습니다.

`R2003`: 받는 사람이 이 사양에 설명된 값 형식과 일치하지 않는 형식의 필드 값이 포함된 활동을 거부할 수 있습니다.

`R2004`: 달리 명시되지 않은 경우, 보낸 사람이 문자열 필드에 대해 빈 문자열 값을 포함하면 안 됩니다.

`R2005`: 달리 명시되지 않은 경우, 보낸 사람이 활동 또는 중첩된 복합 개체에 추가 필드를 포함할 수 있습니다. 받는 사람이 해석할 수 없는 필드를 수락해야 합니다.

`R2006`: 받는 사람이 해석할 수 없는 형식의 이벤트를 수락해야 합니다.

### <a name="type"></a>type

`type` 필드는 각 활동의 의미를 제어하며, 규칙에 따라 짧은 문자열(예: “`message`”)입니다. 보낸 사람은 이후의 잘 정의된 값과 충돌할 가능성이 낮은 값을 선택하는 것이 좋지만, 고유한 응용 프로그램 계층 형식을 정의할 수 있습니다. 보낸 사람이 URI를 형식 값으로 사용하는 경우 동등성을 설정하는 URI 사다리 비교를 구현하면 안 됩니다.

`R2010`: 활동에 문자열 값 형식의 `type` 필드가 포함되어야 합니다.

`R2011`: 서수가 동일한 경우에만 두 `type` 값이 동등합니다.

`R2012`: 보낸 사람이 이 문서에 정의되지 않은 활동 `type` 값을 생성할 수 있습니다.

`R2013`: 채널이 해석할 수 없는 형식의 활동을 거부해야 합니다.

`R2014`: 봇 또는 클라이언트가 해석할 수 없는 형식의 활동을 무시해야 합니다.

### <a name="channel-id"></a>채널 ID

`channelId` 필드는 활동의 채널 및 신뢰할 수 있는 저장소를 설정합니다. `channelId` 필드의 값은 문자열 형식입니다.

`R2020`: 활동에 문자열 값 형식의 `channelId` 필드가 포함되어야 합니다.

`R2021`: 서수가 동일한 경우에만 두 `channelId` 값이 동등합니다.

`R2022`: 채널이 필요한 `channelId` 값 없이 받는 모든 활동을 무시하거나 거부할 수 있습니다.

### <a name="id"></a>ID

`id` 필드는 채널에 기록된 활동의 ID를 설정합니다. 아직 기록되지 않은 진행 중인 활동에는 ID가 없습니다. 모든 활동에 ID가 할당되는 것은 아닙니다. 예를 들어, [입력 활동](#typing-activity)에는 `id`가 할당되지 않을 수 있습니다. `id` 필드의 값은 문자열 형식입니다.

`R2030`: 해당 활동에 사용할 수 있는 경우 채널에 `id` 필드가 포함되어야 합니다.

`R2031`: 클라이언트 및 봇이 생성하는 활동에 `id` 필드를 포함하면 안 됩니다.

편리한 구현을 위해 다른 참가자는 활동 ID를 잘 모르며 서수 비교만 사용하여 동등성을 설정한다고 가정해야 합니다.

예를 들어, 채널이 16진수로 인코드된 GUID를 각 활동 ID에 사용할 수 있습니다. 대문자로 인코드된 GUID는 소문자로 인코드된 GUID와 논리적으로 동일하지만, 가능한 경우 보낸 사람이 이러한 대체 인코딩을 사용하면 안 됩니다. 각 ID의 정규화된 버전은 신뢰할 수 있는 저장소인 채널에 의해 설정됩니다.

`R2032`: `id` 값을 생성하는 경우 보낸 사람이 서수 비교를 통해 동등성을 설정할 수 있는 값을 선택해야 합니다. 그러나 보낸 사람과 받는 사람이 상황에 대한 전문 지식이 있는 경우, 서수가 동일하지 않은 두 값의 논리적 동등성을 허용할 수 있습니다.

`id` 필드는 중복 제거를 허용하도록 설계되었지만, 대부분의 응용 프로그램에서 금지됩니다.

`R2033`: 받는 사람이 ID를 기준으로 활동을 중복 제거할 수 있지만, 보낸 사람은 받는 사람이 이러한 중복 제거를 수행할 것에 의존하면 안 됩니다.

### <a name="timestamp"></a>타임 스탬프

`timestamp` 필드는 활동이 발생한 정확한 UTC 시간을 기록합니다. 컴퓨팅 시스템의 분산 특성 때문에 중요한 시간은 채널(신뢰할 수 있는 저장소)이 활동을 기록하는 시간입니다. 클라이언트 또는 봇이 활동을 시작한 시간은 `localTimestamp` 필드에 별도로 전송될 수 있습니다. `timestamp` 필드의 값은 문자열에 있는 [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)[[2](#references)]로 인코드된 날짜/시간입니다.

`R2040`: 해당 활동에 사용할 수 있는 경우 채널에 `timestamp` 필드가 포함되어야 합니다.

`R2041`: 클라이언트 및 봇이 생성하는 활동에 `timestamp` 필드를 포함하면 안 됩니다.

`R2042`: 활동의 순서가 잘못 표시될 수 있으므로 클라이언트 및 봇이 `timestamp`를 사용하여 활동을 거부하면 안 됩니다. 그러나 `timestamp`를 사용하여 UI 내에서 또는 다운스트림 처리를 위해 활동 순서를 지정할 수 있습니다.

`R2043`: 보낸 사람이 항상 `timestamp` 필드의 값을 UTC로 인코드해야 하며, 항상 값에 Z를 명시적 UTC 표시로 포함해야 합니다.

### <a name="local-timestamp"></a>로컬 타임스탬프

`localTimestamp` 필드는 활동이 생성된 날짜/시간 및 표준 시간대 오프셋을 나타냅니다. 활동이 기록된 UTC `timestamp`와 다를 수 있습니다. `localTimestamp` 필드의 값은 문자열에 있는 ISO 8601[[3](#references)]로 인코드된 날짜/시간입니다.

`R2050`: 클라이언트 및 봇이 해당 활동에 `localTimestamp`를 포함할 수 있습니다. 인코드된 값에 표준 시간대 오프셋을 명시적으로 나열해야 합니다.

`R2051`: 채널이 보낸 사람에서 받는 사람으로 활동을 전달하는 경우 `localTimestamp`를 유지해야 합니다.

### <a name="from"></a>원본

`from` 필드는 활동을 생성한 클라이언트, 봇 또는 채널을 설명합니다. `from` 필드의 값은 [채널 계정](#channel-account) 형식의 복합 개체입니다.

`from.id` 필드는 활동을 생성한 사람을 식별합니다. 가장 일반적으로, 시스템 내의 다른 사용자 또는 봇입니다. `from` 필드가 채널 자체를 식별하는 경우도 있습니다.

`R2060`: 채널이 활동을 생성하는 경우 `from` 및 `from.id` 필드를 포함해야 합니다.

`R2061`: 봇 및 클라이언트가 활동을 생성하는 경우 `from` 및 `from.id` 필드를 포함해야 합니다. `from` 및 `from.id` 필드가 없으면 채널이 활동을 거부할 수 있습니다.

`from.name` 필드는 선택 사항이며, 채널 내 계정의 표시 이름을 나타냅니다. 채널은 클라이언트 및 봇이 해당 UI 및 백 엔드 시스템을 채울 수 있도록 이 값을 포함해야 합니다. 봇 및 클라이언트는 이 저장소의 중앙 레코드가 있는 채널에 이 값을 보내면 안 되지만, 모든 활동에 값을 채우는 채널(예: 메일 채널)에는 이 값을 보낼 수 있습니다.

`R2062`: `from.name` 필드가 있고 `from` 필드를 사용할 수 있는 경우 채널이 `from.name` 필드를 포함해야 합니다.

`R2063`: 채널 내에서 의미 체계가 중요한 경우가 아니면 봇 및 클라이언트가 `from.name` 필드를 포함하면 안 됩니다.

### <a name="recipient"></a>받는 사람

`recipient` 필드는 이 활동을 받는 클라이언트 또는 봇을 설명합니다. 이 필드는 활동이 정확히 한 명의 받는 사람에게 전송되는 경우에만 의미가 있습니다. 활동이 채널에 전송되는 경우와 같이 여러 명의 받는 사람에게 브로드캐스트되는 경우에는 의미가 없습니다. 필드의 목적은 받는 사람이 자신을 식별할 수 있도록 하는 것입니다. 이 필드는 클라이언트 또는 봇이 채널 내에서 둘 이상의 ID를 가진 경우에 유용합니다. `recipient` 필드의 값은 [채널 계정](#channel-account) 형식의 복합 개체입니다.

`R2070`: 채널이 한 명의 받는 사람에게 활동을 전송하는 경우 `recipient` 및 `recipient.id` 필드를 포함해야 합니다.

`R2071`: 봇 및 클라이언트가 활동을 생성하는 경우 `recipient` 필드를 포함하면 안 됩니다.

`recipient.name` 필드는 선택 사항이며, 채널 내 계정의 표시 이름을 나타냅니다. 채널은 클라이언트 및 봇이 해당 UI 및 백 엔드 시스템을 채울 수 있도록 이 값을 포함해야 합니다.

`R2072`: `recipient.name` 필드가 있고 `recipient` 필드를 사용할 수 있는 경우 채널이 `recipient.name` 필드를 포함해야 합니다.

### <a name="conversation"></a>대화

`conversation` 필드는 활동이 존재하는 대화에 대해 설명합니다. `conversation` 필드의 값은 [대화 계정](#conversation-account) 형식의 복합 개체입니다.

`R2080`: 채널, 봇 및 클라이언트가 활동을 생성하는 경우 `conversation` 및 `conversation.id` 필드를 포함해야 합니다.

`conversation.name` 필드는 선택 사항이며, 존재하고 사용 가능한 경우 대화의 표시 이름을 나타냅니다.

`R2081`: 사용 가능한 경우 채널이 `conversation.name` 및 `conversation.isGroup` 필드를 포함해야 합니다.

`R2082`: 채널 내에서 의미 체계가 중요한 경우가 아니면 봇 및 클라이언트가 `conversation.name` 필드를 포함하면 안 됩니다.

`R2083`: 봇 및 클라이언트가 생성하는 활동에 `conversation.isGroup` 필드를 포함하면 안 됩니다.

### <a name="reply-to-id"></a>ID에 회신

`replyToId` 필드는 현재 활동이 해당 회신인 이전 활동을 식별합니다. 이 필드를 사용하여 참가자 간에 스레드 대화 및 주석 중첩을 전달할 수 있습니다. `replyToId`는 현재 대화 내에서만 유효합니다. 다른 대화에 대한 참조는 [relatesTo](#relates-to)를 참조하세요. `replyToId` 필드의 값은 문자열입니다.

`R2090`: 다른 활동에 대한 회신인 경우, 보낸 사람이 활동에 `replyToId`를 포함해야 합니다.

`R2091`: 해당 `replyToId`가 대화 내에서 유효한 활동을 참조하지 않는 경우, 채널이 활동을 거부할 수 있습니다.

`R2092`: 전송되는 활동이 다른 활동에 대한 회신인 경우에도 채널이 필드를 사용하지 않음을 알고 있으면 봇 및 클라이언트가 `replyToId`를 생략할 수 있습니다.

### <a name="entities"></a>엔터티

`entities` 필드에는 이 활동과 관련된 메타데이터 개체의 단순 목록이 포함됩니다. 첨부 파일과 달리([첨부 파일](#attachments) 필드 참조), 엔터티가 사용자 조작 가능 콘텐츠 요소로 매니페스트되지 않아도 되며, 해석할 수 없는 경우 무시됩니다. 보낸 사람은 받는 사람이 수락할 수 있는지 알지 못하는 경우에도 받는 사람에게 유용하다고 생각하는 엔터티를 포함할 수 있습니다. 각 `entities` 목록 요소의 값은 [엔터티](#entity) 형식의 복합 개체입니다.

`R2100`: 포함된 요소가 없는 경우 보낸 사람이 `entities` 필드를 생략해야 합니다.

`R2101`: 엔터티에 고유한 의미가 있는 경우, 보낸 사람이 동일한 형식의 엔터티를 여러 개 보낼 수 있습니다.

`R2102`: 보낸 사람이 동일한 형식 및 콘텐츠의 엔터티를 둘 이상 포함하면 안 됩니다.

`R2103`: 보낸 사람과 받는 사람이 활동에 포함된 엔터티의 특정 순서에 의존하면 안 됩니다.

### <a name="channel-data"></a>채널 데이터

활동 스키마의 확장성 데이터는 주로 `channelData` 필드에 구성됩니다. 이렇게 하면 프로토콜을 구현하는 SDK의 배관이 간소화됩니다. `channelData` 개체의 형식은 활동을 보내거나 받는 채널에 의해 정의됩니다.

`R2200`: 채널이 JSON 기본 형식(예: 문자열, 정수)인 `channelData` 형식을 정의하면 안 됩니다. 대신, `channelData`를 복합 형식으로 정의하거나 정의되지 않은 상태로 두어야 합니다.

`R2201`: 현재 채널에 대한 `channelData` 형식이 정의되지 않은 경우, 받는 사람이 `channelData`의 콘텐츠를 무시해야 합니다.

### <a name="service-url"></a>서비스 URL

활동은 트래픽을 보내고 받는 데 별도의 전송 연결을 사용하여 비동기적으로 자주 전송됩니다. `serviceUrl` 필드는 채널에서 현재 활동에 대한 회신을 보낼 수 있는 URL을 나타내는 데 사용됩니다. `serviceUrl` 필드의 값은 문자열 형식입니다.

`R2300`: 채널이 봇에 보내는 모든 활동에 `serviceUrl` 필드를 포함해야 합니다.

`R2301`: 채널이 채널의 엔드포인트를 이미 알고 있는 클라이언트에게 `serviceUrl` 필드를 포함하면 안 됩니다.

`R2302`: 봇 및 클라이언트가 생성하는 활동에 `serviceUrl` 필드를 채우면 안 됩니다.

`R2302`: 채널이 봇 및 클라이언트에서 보낸 활동의 `serviceUrl` 값을 무시해야 합니다.

`R2304`: 봇이 오랜 기간 유지할 수 있으므로 채널이 `serviceUrl` 필드에 대해 안정적인 값을 사용해야 합니다.

## <a name="message-activity"></a>메시지 활동

메시지 활동은 대화형 인터페이스 내에 표시할 콘텐츠를 나타냅니다. 메시지 활동에는 텍스트, 음성, 대화형 카드, 이진 또는 알 수 없는 첨부 파일이 포함될 수 있습니다. 일반적으로 채널은 메시지 활동이 잘 구성되도록 이러한 콘텐츠 중 하나만 포함하도록 요구합니다.

메시지 활동은 `message`의 `type` 값으로 식별됩니다.

### <a name="text"></a>텍스트

`text` 필드에는 텍스트 콘텐츠가 Markdown 형식, XML 또는 일반 텍스트로 포함됩니다. 지정되지 않았거나 모호한 경우, 일반 형식이므로 [`textFormat`](#text-format) 필드가 형식을 제어합니다. `text` 필드의 값은 문자열 형식입니다.

`R3000`: `text` 필드에 빈 문자열을 포함하여 콘텐츠 없이 텍스트를 보낼 수 있습니다.

`R3001`: 해당 채널에 대해 정상적으로 성능이 저하되도록 채널이 `markdown` 형식 텍스트를 처리해야 합니다.

### <a name="text-format"></a>텍스트 형식

`textFormat` 필드는 [`text`](#text) 필드를 [Markdown](https://daringfireball.net/projects/markdown/)[[4](#references)], 일반 텍스트 또는 XML로 해석해야 하는지를 나타냅니다. `textFormat` 필드의 값은 문자열 형식으로, 정의된 값은 `markdown`, `plain` 및 `xml`입니다. 기본값은 `plain`입니다. 이 필드는 임의의 값으로 확장되지 않습니다.

`textFormat` 필드는 첨부 파일 등의 추가 필드를 제어합니다. 이 관계는 이 문서의 다른 곳에서, 해당 필드와 함께 설명합니다.

`R3010`: 보낸 사람이 `textFormat` 필드를 포함하는 경우 정의된 값만 보내야 합니다.

`R3011`: 값이 `plain`인 경우 보낸 사람이 `textFormat`을 생략해야 합니다.

`R3012`: 받는 사람이 정의되지 않은 값을 `plain`으로 해석해야 합니다.

`R3013`: 채널에서 지원됨과 지원되는 XML 언어의 특성을 사전에 알고 있는 경우가 아니면 봇과 클라이언트가 `xml` 값을 보내면 안 됩니다.

`R3014`: 채널이 봇에 `markdown` 또는 `xml` 콘텐츠를 보내면 안 됩니다.

`R3015`: 채널이 최소한 `textformat` 값 `plain` 및 `markdown`을 수락해야 합니다.

`R3016`: 채널이 `textformat` 값 `xml`을 거부할 수 있습니다.

### <a name="locale"></a>로캘

`locale` 필드는 [`text`](#text) 필드의 언어 코드를 전달합니다. `locale` 필드의 값은 문자열에 있는 [ISO 639](https://www.iso.org/iso-639-language-codes.html)[[5](#references)] 코드입니다.

`R3020`: `locale` 필드의 값이 없거나 알 수 없는 경우 받는 사람이 알 수 없음으로 처리해야 합니다.

`R3021`: 받는 사람이 알 수 없는 로캘의 활동을 거부하면 안 됩니다.

### <a name="speak"></a>음성

`speak` 필드는 텍스트 음성 변환 시스템을 통해 활동을 말해야 하는 방법을 나타냅니다. 이 필드는 기본값이 부적절한 것으로 간주되는 경우에만 음성 렌더링을 사용자 지정하는 데 사용됩니다. 텍스트, 첨부 파일 및 요약을 포함하여 활동 내의 모든 콘텐츠에 대한 음성 합성을 바꿉니다. `speak` 필드의 값은 문자열에 [SSML](https://www.w3.org/TR/speech-synthesis/)[[6](#references)]로 인코드됩니다. 래핑되지 않은 텍스트가 허용되며, 기본 SSML로 자동으로 업그레이드됩니다.

`R3030`: `speak` 필드에 빈 문자열을 포함하여 음성이 생성되지 않도록 지정할 수 있습니다.

`R3031`: 음성을 생성할 수 없는 경우 받는 사람이 `speak` 필드를 무시해야 합니다.

`R3032`: 루트 SSML 요소가 없는 경우 받는 사람이 포함된 텍스트를 앞에 유효한 [XML 프롤로그](https://www.w3.org/TR/xml/#sec-prolog-dtd)[[7](#references)]가 있는 SSML `<speak>` 태그의 내부 콘텐츠로 간주해야 하며, 그렇지 않은 경우 유효한 SSML 문서로 업그레이드해야 합니다.

`R3033`: 받는 사람이 XML DTD 또는 스키마 확인을 사용하여 전달된 XML 조각 외부의 원격 리소스를 포함하면 안 됩니다.

`R3034`: 채널이 봇에 `speak` 필드를 보내면 안 됩니다.

### <a name="input-hint"></a>입력 힌트

`inputHint` 필드는 활동 생성기가 응답을 예상하는지 여부를 나타냅니다. 이 필드는 모달 사용자 인터페이스가 있는 채널 내에서 주로 사용되며, 일반적으로 연속 채팅 피드가 있는 채널에서는 사용되지 않습니다. `inputHint` 필드의 값은 문자열 형식으로, 정의된 값은 `accepting`, `expecting` 및 `ignoring`입니다. 기본값은 `accepting`입니다.

`R3040`: 보낸 사람이 `inputHint` 필드를 포함하는 경우 정의된 값만 보내야 합니다.

`R3041`: `inputHint`가 사용되는 채널에 활동을 보내는 경우 값이 `accepting`인 경우에도 봇이 필드를 포함해야 합니다.

`R3042`: 받는 사람이 정의되지 않은 값을 `accepting`으로 해석해야 합니다.

### <a name="attachments"></a>첨부 파일

`attachments` 필드에는 이 활동의 일부로 표시할 개체의 단순 목록이 포함됩니다. 각 `attachments` 목록 요소의 값은 [첨부 파일](#attachment) 형식의 복합 개체입니다.

`R3050`: 포함된 요소가 없는 경우 보낸 사람이 `attachments` 필드를 생략해야 합니다.

`R3051`: 보낸 사람이 동일한 형식의 엔터티를 여러 개 보낼 수 있습니다.

`R3052`: 받는 사람이 알 수 없는 형식의 첨부 파일을 다운로드 가능 문서로 처리할 수 있습니다.

`R3053`: 렌더링 제한 사항으로 인해 이미지 뒤에 문서 그룹화 등의 변경 내용이 강제로 적용되는 경우를 제외하고, 받는 사람이 콘텐츠를 처리할 때 첨부 파일의 순서를 유지해야 합니다.

### <a name="attachment-layout"></a>첨부 파일 레이아웃

`attachmentLayout` 필드는 [`attachments`](#attachments) 필드에 포함된 콘텐츠를 유지하는 방법을 사용자 인터페이스 렌더러에 지시합니다. `attachmentLayout` 필드의 값은 문자열 형식으로, 정의된 값은 `list` 및 `carousel`입니다. 기본값은 `list`입니다.

`R3060`: 보낸 사람이 `attachmentLayout` 필드를 포함하는 경우 정의된 값만 보내야 합니다.

`R3061`: 받는 사람이 정의되지 않은 값을 `list`으로 해석해야 합니다.

### <a name="summary"></a>요약

`summary` 필드에는 지원하지 않는 채널에서 [`attachments`](#attachments)를 바꾸는 데 사용되는 텍스트가 포함됩니다. `summary` 필드의 값은 문자열 형식입니다.

`R3070`: 받는 사람이 `summary` 필드가 논리적으로 `text` 필드를 따른다고 간주해야 합니다.

`R3071`: 채널이 봇에 `summary` 필드를 보내면 안 됩니다.

`R3072`: 활동 내의 모든 첨부 파일을 처리할 수 있는 경우 채널이 `summary` 필드를 무시해야 합니다.

### <a name="suggested-actions"></a>제안된 동작

`suggestedActions` 필드에는 사용자에게 표시할 수 있는 대화형 동작의 페이로드가 포함됩니다. `suggestedActions` 및 해당 매니페스트 지원은 주로 채널에 따라 달라집니다. `suggestedActions` 필드의 값은 [제안된 동작](#suggested-actions-2) 형식의 복합 개체입니다.

### <a name="value"></a>값

`value` 필드에는 전송되는 활동과 관련된 프로그래밍 방식의 페이로드가 포함됩니다. 해당 의미와 형식은 필드 사용을 설명하는 이 문서의 다른 섹션에서 정의됩니다.

`R3080`: 보낸 사람이 기본 형식(예: 문자열, 정수)의 `value` 필드를 포함하면 안 됩니다. `value` 필드는 복합 형식이거나 생략되어야 합니다.

### <a name="expiration"></a>만료

`expiration` 필드에는 활동이 “만료됨”으로 간주되고 받는 사람에게 표시되지 않아야 하는 시간이 포함됩니다. `expiration` 필드의 값은 문자열에 있는 [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)[[2](#references)]로 인코드된 날짜/시간입니다.

`R3090`: 보낸 사람이 항상 `expiration` 필드의 값을 UTC로 인코드해야 하며, 항상 값에 Z를 명시적 UTC 표시로 포함해야 합니다.

### <a name="importance"></a>중요도

`importance` 필드에는 받는 사람에게 활동의 상대적 중요도를 알리는 열거형 값 집합이 포함됩니다.  이러한 중요도 힌트를 사용자 환경에 매핑하는 것은 받는 사람의 책임입니다. `importance` 필드의 값은 문자열 형식으로, 정의된 값은 `low`, `normal` 및 `high`입니다. 기본값은 `normal`입니다.

`R3100`: 보낸 사람이 `importance` 필드를 포함하는 경우 정의된 값만 보내야 합니다.

`R3101`: 받는 사람이 정의되지 않은 값을 `normal`으로 해석해야 합니다.

### <a name="deliverymode"></a>DeliveryMode

`deliveryMode` 필드에는 받는 사람에게 활동의 대체 전송 경로를 알리는 열거형 값 집합 중 하나가 포함됩니다.  `DeliveryMode` 필드의 값은 문자열 형식으로, 정의된 값은 `normal` 및 `notification`입니다. 기본값은 `normal`입니다.

`R3110`: 보낸 사람이 `deliveryMode` 필드를 포함하는 경우 정의된 값만 보내야 합니다.

`R3111`: 받는 사람이 정의되지 않은 값을 `normal`으로 해석해야 합니다.

## <a name="contact-relation-update-activity"></a>연락 관계 업데이트 활동

연락 관계 업데이트 활동은 채널 내에서 받는 사람과 사용자 간의 관계 변경을 알립니다. 일반적으로 연락 관계 업데이트 활동에는 사용자 생성 콘텐츠가 포함되지 않습니다. 연락 관계 업데이트 활동에서 설명하는 관계 업데이트는 `from` 필드의 사용자(항상은 아니지만 대체로 업데이트를 시작하는 사용자)와 `recipient` 필드의 사용자 또는 봇 간에 발생합니다.

연락 관계 업데이트 활동은 `contactRelationUpdate`의 `type` 값으로 식별됩니다.

### <a name="action"></a>조치

`action` 필드는 연락 관계 업데이트 활동의 의미를 설명합니다. `action` 필드의 값은 문자열입니다. `from` 및 `recipient` 필드의 사용자/봇 간 관계를 나타내는 `add` 및 `remove` 값만 정의됩니다.

## <a name="conversation-update-activity"></a>대화 업데이트 활동

대화 업데이트 활동은 대화 멤버, 설명, 존재 등의 변경을 설명합니다. 일반적으로 대화 업데이트 활동에는 사용자 생성 콘텐츠가 포함되지 않습니다. 업데이트되는 대화는 `conversation` 필드에서 설명합니다.

대화 업데이트 활동은 `conversationUpdate`의 `type` 값으로 식별됩니다.

`R4100`: 보낸 사람이 `membersAdded`, `membersRemoved`, `topicName` 및 `historyDisclosed` 필드 중 0개 이상을 대화 업데이트 활동에 포함할 수 있습니다.

`R4101`: `id` 필드로 식별된 각 `channelAccount`가 `membersAdded` 및 `membersRemoved` 필드에 한 번만 표시되어야 합니다. 두 필드에 모두 ID가 표시되면 안 됩니다. 두 필드 중 하나에서 ID가 중복되면 안 됩니다.

`R4102`: 채널 계정이 대화에서 제거 또는 추가되지 않은 경우 채널이 대화 업데이트 활동을 사용하여 채널 계정 필드(예: `name`)의 변경을 나타내면 안 됩니다.

`R4103`: 활동이 두 필드 중 하나의 값이 변경되었음을 알리지 않는 경우 채널이 `topicName` 또는 `historyDisclosed` 필드를 보내면 안 됩니다.

### <a name="members-added"></a>멤버 추가됨

`membersAdded` 필드에는 대화에 추가된 채널 참가자(봇 또는 사용자) 목록이 포함됩니다. `membersAdded` 필드의 값은 [`channelAccount`](#channel-account) 형식의 배열입니다.

### <a name="members-removed"></a>멤버 제거됨

`membersRemoved` 필드에는 대화에서 제거된 채널 참가자(봇 또는 사용자) 목록이 포함됩니다. `membersRemoved` 필드의 값은 [`channelAccount`](#channel-account) 형식의 배열입니다.

### <a name="topic-name"></a>항목 이름

`topicName` 필드에는 대화에 대한 텍스트 주제 또는 설명이 포함됩니다. `topicName` 필드의 값은 문자열 형식입니다.

### <a name="history-disclosed"></a>기록 공개됨

`historyDisclosed` 필드는 사용되지 않습니다.

`R4110`: 보낸 사람이 `historyDisclosed` 필드를 포함하면 안 됩니다.

## <a name="end-of-conversation-activity"></a>대화 종료 활동

대화 종료 활동은 받는 사람의 관점에서 대화 종료를 알립니다. 이는 대화가 완전히 종료되었거나 받는 사람이 대화 종료와 구분할 수 없는 방식으로 대화에서 제거되었기 때문일 수 있습니다. 종료되는 대화는 `conversation` 필드에서 설명합니다.

대화 종료 활동은 `endOfConversation`의 `type` 값으로 식별됩니다.

`code` 및 `text` 필드는 둘 다 선택 사항입니다.

### <a name="code"></a>코드

`code` 필드에는 대화가 종료된 이유 또는 방식을 설명하는 프로그래밍 방식의 값이 포함됩니다. `code` 필드의 값은 문자열 형식이며, 활동을 보내는 채널에서 해당 의미가 정의됩니다.

### <a name="text"></a>텍스트

`text` 필드에는 사용자에게 전달할 선택적 텍스트 콘텐츠가 포함됩니다. `text` 필드의 값은 문자열 형식이며, 해당 형식은 일반 텍스트입니다.

## <a name="event-activity"></a>이벤트 활동

이벤트 활동은 클라이언트 또는 채널에서 봇으로 프로그래밍 방식의 정보를 전달합니다. 이벤트 활동의 의미는 `name` 필드에서 정의되며, 채널 범위 내에서 유효합니다. 이벤트 활동은 대화형 정보(예: 단추 클릭)와 비대화형 정보(예: 포함된 음성 모델을 자동으로 업데이트하는 클라이언트에 대한 알림)를 둘 다 전달하도록 설계되었습니다.

이벤트 활동은 [호출 활동](#invoke-activity)에 상응하는 비동기 활동입니다. 호출과 달리, 이벤트는 클라이언트 응용 프로그램 확장에 의해 확장됩니다.

이벤트 활동은 `event`의 `type` 값과 `name` 필드의 특정 값으로 식별됩니다.

`R5000`: 클라이언트가 응용 프로그램 사용자 지정을 허용하는 경우 채널이 클라이언트와 봇 간에 응용 프로그램 정의 이벤트 메시지를 허용할 수 있습니다.

### <a name="name"></a>Name

`name` 필드는 이벤트의 의미와 `value` 필드의 스키마를 제어합니다. `name` 필드의 값은 문자열 형식입니다.

`R5001`: 이벤트 활동에는 `name` 필드가 포함되어야 합니다.

`R5002`: 받는 사람이 파악할 수 없는 `name` 필드가 있는 이벤트 활동을 무시해야 합니다.

### <a name="value"></a>값

`value` 필드에는 이벤트 이름에서 정의된, 이 이벤트에 관련된 매개 변수가 포함됩니다. `value` 필드의 값은 복합 형식입니다.

`R5100`: 이벤트 이름에서 정의된 경우 `value` 필드가 없거나 비어 있을 수 있습니다.

`R5101`: 이벤트 활동에 대한 확장에서 받는 사람이 `value` 필드의 스키마를 파악하기 위해 활동의 `type` 및 `name` 필드가 아닌 다른 정보를 사용하도록 요구하면 안 됩니다.

### <a name="relates-to"></a>관련 대상

`relatesTo` 필드는 다른 대화 및 필요에 따라 해당 활동 내의 특정 활동을 참조합니다. `relatesTo` 필드의 값은 대화 참조 형식의 복합 개체입니다.

`R5200`: `relatesTo`가 `conversation` 필드에 식별된 대화 내의 활동을 참조하면 안 됩니다.

## <a name="invoke-activity"></a>호출 활동

호출 활동은 클라이언트 또는 채널에서 봇으로 프로그래밍 방식의 정보를 전달하며, 채널에서 사용할 해당 반환 페이로드가 있습니다. 호출 활동의 의미는 `name` 필드에서 정의되며, 채널 범위 내에서 유효합니다. 

호출 활동은 [이벤트 활동](#event-activity)에 상응하는 동기 활동입니다. 이벤트 활동은 확장 가능하도록 설계되었습니다. 호출 활동은 응답 페이로드를 채널에 다시 반환할 수 있다는 점에서만 다릅니다. 채널이 이러한 응답 페이로드를 처리할 위치와 방법을 결정해야 하므로 호출은 각 호출 이름에 대한 명시적 지원이 채널에 추가된 경우에만 유용합니다. 따라서 호출은 제네릭 응용 프로그램 확장성 메커니즘으로 설계되지 않았습니다.

호출 활동은 `invoke`의 `type` 값과 `name` 필드의 특정 값으로 식별됩니다.

정의된 호출 활동 목록은 [부록 III](#appendix-iii---protocols-using-the-invoke-activity)에 포함되어 있습니다.

`R5301`: 채널이 클라이언트와 봇 간에 응용 프로그램 정의 호출 메시지를 허용하면 안 됩니다.

### <a name="name"></a>Name

`name` 필드는 호출의 의미와 `value` 필드의 스키마를 제어합니다. `name` 필드의 값은 문자열 형식입니다.

`R5401`: 호출 활동에는 `name` 필드가 포함되어야 합니다.

`R5402`: 받는 사람이 파악할 수 없는 `name` 필드가 있는 이벤트 활동을 무시해야 합니다.

### <a name="value"></a>값

`value` 필드에는 이벤트 이름에서 정의된, 이 이벤트에 관련된 매개 변수가 포함됩니다. `value` 필드의 값은 복합 형식입니다.

`R5500`: 이벤트 이름에서 정의된 경우 `value` 필드가 없거나 비어 있을 수 있습니다.

`R5501`: 이벤트 활동에 대한 확장에서 받는 사람이 `value` 필드의 스키마를 파악하기 위해 활동의 `type` 및 `name` 필드가 아닌 다른 정보를 사용하도록 요구하면 안 됩니다.

### <a name="relates-to"></a>관련 대상

`relatesTo` 필드는 다른 대화 및 필요에 따라 해당 활동 내의 특정 활동을 참조합니다. `relatesTo` 필드의 값은 [대화 참조](#conversation-reference) 형식의 복합 개체입니다.

`R5600`: `relatesTo`가 `conversation` 필드에 식별된 대화 내의 활동을 참조하면 안 됩니다.

## <a name="installation-update-activity"></a>설치 업데이트 활동

설치 업데이트 활동은 채널의 조직 구성 단위(예: 고객 테넌트 또는 “팀”) 내에서 봇의 설치 또는 제거를 나타냅니다. 설치 업데이트 활동은 일반적으로 채널의 추가나 제거를 나타내지 않습니다.

설치 업데이트 활동은 `installationUpdate`의 `type` 값으로 식별됩니다.

`R5700`: 채널 내의 테넌트, 팀 또는 다른 조직 구성 단위에서 봇이 제거 또는 추가된 경우 채널이 설치 활동을 보낼 수 있습니다.

`R5701`: 채널에서 봇이 제거 또는 설치된 경우 채널이 설치 활동을 보내면 안 됩니다.

### <a name="action"></a>조치

`action` 필드는 설치 업데이트 활동의 의미를 설명합니다. `action` 필드의 값은 문자열입니다. `add` 및 `remove` 값만 정의됩니다.

## <a name="message-delete-activity"></a>메시지 삭제 활동

메시지 삭제 활동은 대화 내에서 기존 메시지 활동의 삭제를 나타냅니다. 삭제된 활동은 활동 내의 `id` 및 `conversation` 필드에서 참조됩니다.

메시지 삭제 활동은 `messageDelete`의 `type` 값으로 식별됩니다.

`R5800`: 채널이 대화 내의 모든 삭제, 대화 내의 삭제 하위 집합(예: 특정 사용자에 의한 삭제만) 또는 대화 내의 활동 없음에 대해 메시지 삭제 활동을 보내도록 선택할 수 있습니다.

`R5801`: 채널이 봇에 관찰되지 않은 대화 또는 활동에 대해 메시지 삭제 활동을 보내면 안 됩니다.

`R5802`: 봇이 삭제를 트리거하는 경우 채널이 해당 봇에 메시지 삭제 활동을 다시 보내면 안 됩니다.

`R5803`: 채널이 `message` 형식이 아닌 활동에 해당하는 메시지 삭제 활동을 보내면 안 됩니다.

## <a name="message-update-activity"></a>메시지 업데이트 활동

메시지 업데이트 활동은 대화 내에서 기존 메시지 활동의 업데이트를 나타냅니다. 업데이트된 활동은 활동 내의 `id` 및 `conversation` 필드에서 참조되고, 메시지 업데이트 활동에는 수정된 메시지 활동의 모든 필드가 포함됩니다.

메시지 업데이트 활동은 `messageUpdate`의 `type` 값으로 식별됩니다.

`R5900`: 채널이 대화 내의 모든 업데이트, 대화 내의 업데이트 하위 집합(예: 특정 사용자에 의한 업데이트만) 또는 대화 내의 활동 없음에 대해 messageUpdate 활동을 보내도록 선택할 수 있습니다.

`R5901`: 봇이 업데이트를 트리거하는 경우 채널이 해당 봇에 메시지 업데이트 활동을 다시 보내면 안 됩니다.

`R5902`: 채널이 `message` 형식이 아닌 활동에 해당하는 메시지 업데이트 활동을 보내면 안 됩니다.

## <a name="message-reaction-activity"></a>메시지 반응 활동

메시지 반응 활동은 대화 내에서 기존 메시지 활동에 대한 소셜 상호 작용을 나타냅니다. 원래 활동은 활동 내의 `id` 및 `conversation` 필드에서 참조됩니다. `from` 필드는 반응 소스(즉, 메시지에 반응한 사용자)를 나타냅니다.

메시지 반응 활동은 `messageReaction`의 `type` 값으로 식별됩니다.

### <a name="reactions-added"></a>반응 추가됨

`reactionsAdded` 필드에는 이 활동에 추가된 반응 목록이 포함됩니다. `reactionsAdded` 필드의 값은 [`messageReaction`](#message-reaction) 형식의 배열입니다.

### <a name="reactions-removed"></a>반응 제거됨

`reactionsRemoved` 필드에는 이 활동에서 제거된 반응 목록이 포함됩니다. `reactionsRemoved` 필드의 값은 [`messageReaction`](#message-reaction) 형식의 배열입니다.

## <a name="typing-activity"></a>입력 활동

입력 활동은 사용자 또는 봇에서 진행 중인 입력을 나타냅니다. 이 활동은 봇이 “사고 중”임을 나타내는 데 사용되며, 사용자로부터 오디오 수집 등을 나타내는 데 사용될 수도 있지만 주로 사용자가 키 입력을 입력할 때 전송됩니다.

입력 활동은 UI 내에서 3초 동안 유지됩니다.

입력 활동은 `typing`의 `type` 값으로 식별됩니다.

`R6000`: 가능한 경우, 클라이언트가 입력 활동을 받을 경우 입력 표시기를 3초 동안 표시해야 합니다.

`R6001`: 채널에 대해 달리 알려진 경우가 아니면, 보낸 사람이 3초마다 한 번보다 더 자주 입력 활동을 보내면 안 됩니다. 간격이 나타나지 않도록 보낸 사람이 2초마다 입력 활동을 보낼 수도 있습니다.

`R6002`: 채널이 입력 활동에 [`id`](#id)를 할당하는 경우 봇 및 클라이언트가 만료되기 전에 입력 활동을 삭제할 수 있습니다.

`R6003`: 가능한 경우 채널이 봇에 입력 활동을 보내야 합니다.

## <a name="complex-types"></a>복합 형식

이 섹션에서는 위에서 설명한 대로 활동 스키마 내에서 사용되는 복합 형식을 정의합니다.

### <a name="attachment"></a>첨부 파일

첨부 파일은 카드, 이진 문서, 기타 대화형 콘텐츠 등 [메시지 활동](#message-activity)에 포함된 콘텐츠입니다. 텍스트 콘텐츠와 함께 표시됩니다. `contentUrl` 필드 내의 URL 데이터 URI를 통해 또는 `content` 필드에 인라인으로 콘텐츠를 보낼 수 있습니다.

`R7100`: 보낸 사람이 단일 첨부 파일에 `content` 및 `contentUrl` 필드를 둘 다 포함하면 안 됩니다.

#### <a name="content-type"></a>콘텐츠 형식

`contentType` 필드는 첨부 파일 콘텐츠의 [MIME 미디어 형식](https://www.iana.org/assignments/media-types/media-types.xhtml)[[8](#references)]에 대해 설명합니다. `contentType` 필드의 값은 문자열 형식입니다.

#### <a name="content"></a>Content

제공된 경우 `content` 필드에는 구조화된 JSON 개체 첨부 파일이 포함됩니다. `content` 필드의 값은 `contentType` 필드에 정의된 복합 형식입니다.

`R7110`: 보낸 사람이 첨부 파일의 `content` 필드에 JSON 기본 형식을 포함하면 안 됩니다.

#### <a name="content-url"></a>콘텐츠 URL

제공된 경우, `contentUrl` 필드에는 첨부 파일의 콘텐츠에 대한 URL이 포함됩니다. [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 데이터 URI는 일반적으로 채널에서 지원됩니다. `contentUrl` 필드의 값은 문자열 형식입니다.

`R7120`: 받는 사람이 HTTPS URL을 수락해야 합니다.

`R7121`: 받는 사람이 HTTP URL을 수락할 수 있습니다.

`R7122`: 채널이 데이터 URI를 수락해야 합니다.

`R7123`: 채널이 클라이언트 또는 봇에 데이터 URI를 보내면 안 됩니다.

#### <a name="name"></a>Name

`name` 필드에는 첨부 파일의 선택적 이름 또는 파일 이름이 포함됩니다. `name` 필드의 값은 문자열 형식입니다.

#### <a name="thumbnail-url"></a>미리 보기 URL

일부 클라이언트는 대화형 첨부 파일의 자리 표시자로 또는 비대화형 첨부 파일에 대해 사용자 지정 미리 보기를 표시할 수 있습니다. `thumbnailUrl` 필드는 이 미리 보기의 소스를 식별합니다. [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 데이터 URI도 일반적으로 허용됩니다.

`R7140`: 받는 사람이 HTTPS URL을 수락해야 합니다.

`R7141`: 받는 사람이 HTTP URL을 수락할 수 있습니다.

`R7142`: 채널이 데이터 URI를 수락해야 합니다.

`R7143`: 채널이 봇에 `thumbnailUrl` 필드를 보내면 안 됩니다.

### <a name="card-action"></a>카드 동작

카드 동작은 카드 내에서 또는 [제안된 동작](#suggested-actions)으로 사용하기 위한 클릭 가능 단추 또는 대화형 단추를 나타냅니다. 카드 동작은 사용자 입력을 요청하는 데 사용됩니다. 이름과 달리, 카드 동작은 카드에서만 사용하도록 제한되지 않습니다.

카드 동작은 채널에 전송된 경우에만 의미가 있습니다.

채널은 각 동작이 해당 사용자 환경에서 매니페스트되는 방식을 결정합니다. 대부분의 경우 카드는 클릭 가능합니다. 다른 경우에는 음성 입력을 통해 선택할 수 있습니다. 채널이 대화형 활성화 환경을 제공하지 않는 경우(예: SMS를 통해 상호 작용하는 경우), 채널이 활성화를 지원하지 않을 수 있습니다. 동작을 렌더링하는 방법에 대한 결정은 이 문서의 다른 곳(예: 카드 형식 내 또는 [제안된 동작](#suggested-actions) 정의 내)에서 규범적 요구 사항을 통해 제어됩니다.

#### <a name="type"></a>type

`type` 필드는 단추의 의미 및 단추가 활성화된 경우의 동작을 설명합니다. `type` 필드의 값은 규칙에 따라 짧은 문자열(예: “`openUrl`”)입니다. 각 동작 형식과 관련된 요구 사항은 후속 섹션을 참조하세요.

* `messageBack` 형식의 동작은 채팅 시스템을 통해 전송할 텍스트 응답을 나타냅니다.
* `imBack` 형식의 동작은 채팅 피드에 추가되는 텍스트 응답을 나타냅니다.
* `postBack` 형식의 동작은 채팅 피드에 추가되지 않는 텍스트 응답을 나타냅니다.
* `openUrl` 형식의 동작은 클라이언트에서 처리할 하이퍼링크를 나타냅니다.
* `downloadFile` 형식의 동작은 다운로드할 하이퍼링크를 나타냅니다.
* `showImage` 형식의 동작은 표시할 수 있는 이미지를 나타냅니다.
* `signin` 형식의 동작은 클라이언트의 로그인 시스템에서 처리할 하이퍼링크를 나타냅니다.
* `playAudio` 형식의 동작은 재생할 수 있는 오디오 미디어를 나타냅니다.
* `playVideo` 형식의 동작은 재생할 수 있는 비디오 미디어를 나타냅니다.
* `call` 형식의 동작은 전화를 걸 수 있는 전화 번호를 나타냅니다.
* `payment` 형식의 동작은 결제 요청을 나타냅니다.

#### <a name="title"></a>제목

`title` 필드에는 단추 표면에 표시할 텍스트가 포함됩니다. `title` 필드의 값은 문자열 형식이며, 태그를 포함하지 않습니다.

이 필드는 모든 형식의 동작에 적용됩니다.

`R7210`: 채널이 `title` 필드 내의 태그(예: Markdown)를 처리하면 안 됩니다.

#### <a name="image"></a>이미지

`image` 필드에는 단추 표면에 표시할 이미지를 참조하는 URL이 포함됩니다. [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 데이터 URI는 일반적으로 채널에서 지원됩니다. `image` 필드의 값은 문자열 형식입니다.

이 필드는 모든 형식의 동작에 적용됩니다.

`R7220`: 채널이 HTTPS URL을 수락해야 합니다.

`R7221`: 채널이 HTTP URL을 수락할 수 있습니다.

`R7222`: 채널이 데이터 URI를 수락해야 합니다.

#### <a name="text"></a>텍스트

`text` 필드에는 단추를 클릭할 때 봇에 전송되고 채팅 피드에 포함될 텍스트 콘텐츠가 포함됩니다. `text` 필드의 콘텐츠는 단추 형식에 따라 표시되거나 표시되지 않을 수 있습니다. `text` 필드에는 활동 루트에 있는 [`textFormat`](#text-format) 필드를 통해 제어되는 태그가 포함될 수 있습니다. `text` 필드의 값은 문자열 형식입니다.

이 필드는 선택 형식의 동작에만 사용됩니다. 각 동작 형식에 대한 자세한 내용은 이 문서의 뒷부분에 포함되어 있습니다.

`R7230`: `text` 필드에 빈 문자열을 포함하여 콘텐츠 없이 텍스트를 보낼 수 있습니다.

`R7231`: 채널이 `text` 필드의 콘텐츠를 활동 루트에 있는 [`textFormat`](#text-format) 필드에 따라 처리해야 합니다.

#### <a name="display-text"></a>표시 텍스트

`displayText` 필드에는 단추를 클릭할 때 채팅 피드에 포함될 텍스트 콘텐츠가 포함됩니다. `displayText` 필드의 콘텐츠는 채널 내에서 기술적으로 가능한 경우, 항상 표시되어야 합니다. `displayText` 필드에는 활동 루트에 있는 [`textFormat`](#text-format) 필드를 통해 제어되는 태그가 포함될 수 있습니다. `displayText` 필드의 값은 문자열 형식입니다.

이 필드는 선택 형식의 동작에만 사용됩니다. 각 동작 형식에 대한 자세한 내용은 이 문서의 뒷부분에 포함되어 있습니다.

`R7240`: `displayText` 필드에 빈 문자열을 포함하여 콘텐츠 없이 텍스트를 보낼 수 있습니다.

`R7241`: 채널이 `displayText` 필드의 콘텐츠를 활동 루트에 있는 [`textFormat`](#text-format) 필드에 따라 처리해야 합니다.

#### <a name="value"></a>값

`value` 필드에는 단추를 클릭할 때 봇에 전송될 프로그래밍 방식의 콘텐츠가 포함됩니다. 특정 활동 형식에서는 이 필드가 제한되지만, `value` 필드의 콘텐츠는 기본 형식 또는 복합 형식입니다.

이 필드는 선택 형식의 동작에만 사용됩니다. 각 동작 형식에 대한 자세한 내용은 이 문서의 뒷부분에 포함되어 있습니다.

#### <a name="message-back"></a>메시지 저장

`messageBack` 동작은 채팅 시스템을 통해 전송할 텍스트 응답을 나타냅니다. 메시지 저장은 다음 필드를 사용합니다.
* `type`(“`messageBack`”)
* `title`
* `image`
* `text`
* `displayText`
* `value`(모든 형식)

`R7350`: 보낸 사람이 기본 형식(예: 문자열, 정수)의 `value` 필드를 포함하면 안 됩니다. `value` 필드는 복합 형식이거나 생략되어야 합니다.

`R7351`: 채널이 복합 형식이 아닌 `value` 필드를 거부 또는 삭제할 수 있습니다.

`R7352`: 활성화된 경우 채널이 `message` 형식의 활동을 관련된 모든 받는 사람에게 보내야 합니다.

`R7353`: 채널이 텍스트 저장 및 전송을 지원하는 경우 동작의 `text` 필드 콘텐츠가 생성된 메시지 활동의 `text` 필드에 유지 및 전송되어야 합니다.

`R7352`: 채널이 프로그래밍 방식의 추가 값 저장 및 전송을 지원하는 경우 `value` 필드의 콘텐츠가 생성된 메시지 활동의 `value` 필드에 유지 및 전송되어야 합니다.

`R7353`: 채널이 봇에 전송된 값과 다른 값을 채팅 피드에 유지할 수 있도록 지원하는 경우 채팅 기록에 `displayText` 필드를 포함해야 합니다.

`R7354`: 채널이 `R7353`을 지원하지 않지만 채팅 피드 내에서 텍스트 기록을 지원하는 경우 채팅 기록에 `text` 필드를 포함해야 합니다.

#### <a name="im-back"></a>IM 저장

`imBack` 동작은 채팅 피드에 추가되는 텍스트 응답을 나타냅니다. 메시지 저장은 다음 필드를 사용합니다.
* `type`(“`imBack`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7360`: 활성화된 경우 채널이 `message` 형식의 활동을 관련된 모든 받는 사람에게 보내야 합니다.

`R7361`: 채널이 텍스트 저장 및 전송을 지원하는 경우 `title` 필드의 콘텐츠가 생성된 메시지 활동의 `text` 필드에 유지 및 전송되어야 합니다.

`R7362`: 동작의 `title` 필드가 없고 `value` 필드가 문자열 형식인 경우 채널이 생성된 메시지 활동의 `text` 필드에 `value` 필드의 콘텐츠를 전송할 수 있습니다.

`R7363`: 채널이 채팅 피드 내에서 텍스트 기록을 지원하는 경우 채팅 기록에 `title` 필드의 콘텐츠를 포함해야 합니다.

#### <a name="post-back"></a>게시 저장

`postBack` 동작은 채팅 피드에 추가되지 않는 텍스트 응답을 나타냅니다. 게시 저장은 다음 필드를 사용합니다.
* `type`(“`postBack`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7370`: 활성화된 경우 채널이 `message` 형식의 활동을 관련된 모든 받는 사람에게 보내야 합니다.

`R7371`: 게시 저장 동작이 활성화된 경우 채널이 채팅 기록에 텍스트를 포함하면 안 됩니다.

`R7372`: 채널이 문자열 형식이 아닌 `value` 필드를 거부 또는 삭제해야 합니다.

`R7373`: 채널이 텍스트 저장 및 전송을 지원하는 경우 `value` 필드의 콘텐츠가 생성된 메시지 활동의 `text` 필드에 유지 및 전송되어야 합니다.

`R7374`: 채널이 채팅 피드에 기록을 포함하지 않고 봇에 전송을 지원할 수 없는 경우 `title` 필드를 표시 텍스트로 사용해야 합니다.

#### <a name="open-url-actions"></a>URL 열기 동작

`openUrl` 동작은 클라이언트에서 처리할 하이퍼링크를 나타냅니다. URL 열기는 다음 필드를 사용합니다.
* `type`(“`openUrl`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7380`: 보낸 사람이 `openUrl` 동작의 `value` 필드에 URL을 포함해야 합니다.

`R7381`: 받는 사람이 `value` 필드가 없거나 문자열이 아닌 `openUrl` 동작을 거부할 수 있습니다.

`R7382`: 받는 사람이 [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 `value` 필드에 데이터 URI가 포함된 `openUrl` 동작을 거부 또는 삭제해야 합니다.

`R7383`: 받는 사람이 `value` URI가 예기치 않은 URI 체계 또는 값인 `openUrl` 동작을 거부하면 안 됩니다.

`R7384`: 특정 URI 체계(예: HTTP)에 대한 지식이 있는 클라이언트가 포함된 렌더러(예: 브라우저 컨트롤) 내에서 `openUrl` 동작을 처리할 수 있습니다.

`R7385`: 사용 가능한 경우, 클라이언트가 `R7354`에서 처리되지 않은 `openUrl` 동작의 처리를 운영 체제 또는 셸 수준 URI 처리기에 위임해야 합니다.

#### <a name="download-file-actions"></a>파일 다운로드 동작

`downloadFile` 동작은 다운로드할 하이퍼링크를 나타냅니다. 파일 다운로드는 다음 필드를 사용합니다.
* `type`(“`downloadFile`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7390`: 보낸 사람이 `downloadFile` 동작의 `value` 필드에 URL을 포함해야 합니다.

`R7391`: 받는 사람이 `value` 필드가 없거나 문자열이 아닌 `downloadFile` 동작을 거부할 수 있습니다.

`R7392`: 받는 사람이 [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 `value` 필드에 데이터 URI가 포함된 `downloadFile` 동작을 거부 또는 삭제해야 합니다.

#### <a name="show-image-file-actions"></a>이미지 파일 표시 동작

`showImage` 동작은 표시할 수 있는 이미지를 나타냅니다. 이미지 표시는 다음 필드를 사용합니다.
* `type`(“`showImage`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7400`: 보낸 사람이 `showImage` 동작의 `value` 필드에 URL을 포함해야 합니다.

`R7401`: 받는 사람이 `value` 필드가 없거나 문자열이 아닌 `showImage` 동작을 거부할 수 있습니다.

`R7402`: 받는 사람이 [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 전체 `value` 필드가 데이터 URI인 `showImage` 동작을 거부할 수 있습니다.

#### <a name="signin"></a>로그인

`signin` 동작은 클라이언트의 로그인 시스템에서 처리할 하이퍼링크를 나타냅니다. 로그인은 다음 필드를 사용합니다.
* `type`(“`signin`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7410`: 보낸 사람이 `signin` 동작의 `value` 필드에 URL을 포함해야 합니다.

`R7411`: 받는 사람이 `value` 필드가 없거나 문자열이 아닌 `signin` 동작을 거부할 수 있습니다.

`R7412`: 받는 사람이 [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 `value` 필드에 데이터 URI가 포함된 `signin` 동작을 거부 또는 삭제해야 합니다.

#### <a name="play-audio"></a>오디오 재생

`playAudio` 동작은 재생할 수 있는 오디오 미디어를 나타냅니다. 오디오 재생은 다음 필드를 사용합니다.
* `type`(“`playAudio`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7420`: 활성화된 경우 채널이 미디어 이벤트를 보낼 수 있습니다.

`R7421`: 채널이 문자열 형식이 아닌 `value` 필드를 거부 또는 삭제해야 합니다.

`R7422`: [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 보낸 사람이 채널에서 지원됨을 사전에 확인하지 않고 데이터 URI를 보내면 안 됩니다.

#### <a name="play-video"></a>비디오 재생

`playAudio` 동작은 재생할 수 있는 비디오 미디어를 나타냅니다. 비디오 재생은 다음 필드를 사용합니다.
* `type`(“`playVideo`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7430`: 활성화된 경우 채널이 미디어 이벤트를 보낼 수 있습니다.

`R7431`: 채널이 문자열 형식이 아닌 `value` 필드를 거부 또는 삭제해야 합니다.

`R7432`: [RFC 2397](https://tools.ietf.org/html/rfc2397)[[9](#references)]에 정의된 대로 보낸 사람이 채널에서 지원됨을 사전에 확인하지 않고 데이터 URI를 보내면 안 됩니다.

#### <a name="call"></a>호출

`call` 동작은 전화를 걸 수 있는 전화 번호를 나타냅니다. 호출은 다음 필드를 사용합니다.
* `type`(“`call`”)
* `title`
* `image`
* `value`(문자열 형식)

`R7440`: 보낸 사람이 `signin` 동작의 `value` 필드에 `tel` 체계의 URL을 포함해야 합니다.

`R7441`: 받는 사람이 `value` 필드가 없거나 `tel` 체계의 문자열 URI가 아닌 `signin` 동작을 거부해야 합니다.

#### <a name="payment"></a>결제

`payment` 동작은 결제 요청을 나타냅니다. 결제는 다음 필드를 사용합니다.
* `type`(“`payment`”)
* `title`
* `image`
* `value`(복합 형식의 [결제 요청](#payment-request))

`R7450`: 보낸 사람이 `payment` 동작의 `value` 필드에 [결제 요청](#payment-request) 형식의 복합 개체를 포함해야 합니다.

`R7451`: 채널이 `value` 필드가 없거나 [결제 요청](#payment-request) 형식의 복합 개체가 아닌 `payment` 동작을 거부해야 합니다.

### <a name="channel-account"></a>채널 계정

채널 계정은 채널 내의 ID를 나타냅니다. 채널 계정에는 해당 채널 내에서 계정을 식별하고 연결하는 데 사용할 수 있는 ID가 포함되어 있습니다. 이러한 ID가 단일 네임스페이스(예: Skype ID)에 있는 경우도 있고, 여러 서버(예: 메일 주소)에서 페더레이션되는 경우도 있습니다. ID 외에도 채널 계정에는 표시 이름과 AAD(Azure Active Directory) 개체 ID가 포함되어 있습니다.

#### <a name="channel-account-id"></a>채널 계정 ID

`id` 필드는 채널 내의 식별자와 주소입니다. `id` 필드의 값은 문자열입니다. 메일 주소를 사용하는 채널 내의 예제 `id`는 “name@example.com”입니다.

`R7510`: 채널이 스키마 내의 위치에 관계없이 계정 ID에 대해 동일한 값과 규칙을 사용해야 합니다(`from.id`, `recipient.id`, `membersAdded` 등). 이렇게 하면 봇과 클라이언트가 서수 문자열 비교를 사용하여 `conversationUpdate` 활동의 `membersAdded` 필드에 설명된 경우를 알 수 있습니다.

#### <a name="channel-account-name"></a>채널 계정 이름

`name` 필드는 채널 내의 선택적 이름입니다. `name` 필드의 값은 문자열입니다. 채널 내의 예제 `name`은 “John Doe”입니다.

#### <a name="channel-account-aad-object-id"></a>채널 계정 AAD 개체 ID

`aadObjectId` 필드는 AAD(Azure Active Directory) 내에서 계정의 개체 ID에 해당하는 선택적 ID입니다. `aadObjectId` 필드의 값은 문자열입니다.

### <a name="conversation-account"></a>대화 계정

대화 계정은 채널 내에서 대화의 ID를 나타냅니다. 두 계정 간에 하나의 대화만 지원하는 채널(예: SMS)에서 대화 계정은 영구적이며 미리 결정된 시작 또는 끝이 없습니다. 여러 병렬 대화를 지원하는 채널(예: 메일)에서는 각 대화에 고유 ID가 있을 가능성이 큽니다.

#### <a name="conversation-account-id"></a>대화 계정 ID

`id` 필드는 채널 내의 식별자입니다. 이 ID의 형식은 채널에서 정의되며, 프로토콜 전체에서 불투명 문자열로 사용됩니다.

채널이 대화 내의 모든 참가자에 대해 안정적인 `id` 값을 선택해야 합니다. 예를 들어, 1:1 대화에 대한 `id` 필드의 나쁜 예는 상대방 참가자의 ID를 `id` 값으로 사용하는 것입니다. 이 경우 각 참가자의 관점에서 다른 `id`가 생성됩니다. 더 나은 방법은 두 참가자의 ID를 정렬한 후 연결하는 것으로, 둘 다 동일한 ID를 갖게 됩니다.

#### <a name="conversation-account-name"></a>대화 계정 이름

`name` 필드는 채널 내에서 대화의 선택적 이름입니다. `name` 필드의 값은 문자열입니다.

#### <a name="conversation-account-aad-object-id"></a>대화 계정 AAD 개체 ID

`aadObjectId` 필드는 AAD(Azure Active Directory) 내에서 대화의 개체 ID에 해당하는 선택적 ID입니다. `aadObjectId` 필드의 값은 문자열입니다.

#### <a name="conversation-account-is-group"></a>대화 계정이 그룹임

`isGroup` 필드는 활동을 생성했을 때 대화에 둘 이상의 참가자가 포함되어 있는지 여부를 나타냅니다. `isGroup` 필드의 값은 부울입니다. 생략된 경우 기본값은 `false`입니다. 이 필드는 일반적으로 채널에서 참가자의 at 멘션 동작을 제어하며, 셋 이상의 참가자가 대화 내에서 활동을 보내고 받을 수 있는 경우에만 `true`로 설정되어야 합니다.

### <a name="entity"></a>엔터티

엔터티는 활동 또는 대화에 대한 메타데이터를 전달합니다. 각 엔터티의 의미와 모양은 `type` 필드에서 정의되며, 추가 형식 특정 필드가 `type` 필드의 피어로 존재합니다.

`R7600`: 받는 사람이 해석할 수 없는 형식의 엔터티를 무시해야 합니다.

`R7601`: 받는 사람이 해석할 수 있지만 구문 오류 등으로 인해 처리할 수 없는 형식의 엔터티를 무시해야 합니다.

기존 엔터티 형식을 활동 엔터티 형식에 프로젝션하는 당사자는 IRI와 엔터티 스키마 간 바인딩의 일부로 `type` 필드 이름과의 충돌 및 직렬화 요구 사항 `R2001`과의 비호환성을 해결하는 것이 좋습니다.

#### <a name="type"></a>type

`type` 필드는 필수이며 엔터티의 의미 및 모양을 정의합니다. [부록 I](#appendix-ii---non-iri-entity-types)에 정의된 몇 개의 비 IRI 엔터티 형식도 있지만, `type`에는 [IRI](https://tools.ietf.org/html/rfc3987)[[3](#references)]가 포함됩니다.

`R7610`: 보낸 사람이 [부록 II](#appendix-ii---non-iri-entity-types)에 설명된 형식에 대해서만 비 IRI 형식 이름을 사용해야 합니다.

`R7611`: 받는 사람이 해석할 수 있음을 알고 있는 경우 보낸 사람이 [부록 II](#appendix-ii---non-iri-entity-types)에 설명된 형식에 대해 IRI 형식을 보낼 수 있습니다.

`R7612`: 보낸 사람이 [부록 II](#appendix-ii---non-iri-entity-types)에 정의되지 않은 엔터티 형식에 대해 IRI를 사용하거나 설정해야 합니다.

### <a name="suggested-actions"></a>제안된 동작

메시지 콘텐츠에 제안된 동작을 전송하여 클라이언트 UI 내에서 대화형 동작 요소를 만들 수 있습니다.

`R7700`: 제안된 동작을 렌더링할 수 있는 UI를 지원하지 않는 경우 클라이언트가 `suggestedActions` 필드를 무시해야 합니다.

`R7701`: `actions` 필드가 비어 있는 경우 보낸 사람이 `suggestedActions` 필드를 생략해야 합니다.

#### <a name="to"></a>받는 사람

`to` 필드에는 제안된 동작을 표시해야 하는 채널 계정 ID가 포함됩니다. 이 필드를 사용하여 대화 내의 참가자 하위 집합으로 동작을 필터링할 수 있습니다.

`R7710`: `to` 필드가 없거나 비어 있는 경우 클라이언트가 모든 대화 참가자에게 제안된 동작을 표시해야 합니다.

`R7711`: `to` 필드에 잘못된 ID가 포함된 경우 해당 값을 무시해야 합니다.

#### <a name="actions"></a>작업

`actions` 필드에는 표시할 동작의 단순 목록이 포함됩니다. 각 `actions` 목록 요소의 값은 `cardAction` 형식의 복합 개체입니다.

### <a name="message-reaction"></a>메시지 반응

메시지 반응은 소셜 상호 작용(“좋아요”, “+1” 등)을 나타냅니다. 메시지 반응은 현재 단일 필드인 `type` 필드만 전달합니다.

#### <a name="type"></a>type

`type` 필드는 소셜 상호 작용의 형식을 설명합니다. `type` 필드의 값은 문자열이며, 상호 작용이 발생하는 채널에서 해당 의미가 정의됩니다. 몇 가지 일반적인 값은 `like`, `+1` 등으로, 규칙(rule)이 아니라 규칙(convention)에 의해 균일합니다.

## <a name="references"></a>참조

1. [RFC 2119](https://tools.ietf.org/html/rfc2119)
2. [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html)
3. [RFC 3987](https://tools.ietf.org/html/rfc3987)
4. [Markdown](https://daringfireball.net/projects/markdown/)
5. [ISO 639](https://www.iso.org/iso-639-language-codes.html)
6. [SSML](https://www.w3.org/TR/speech-synthesis/)
7. [XML](https://www.w3.org/TR/xml/)
8. [MIME 미디어 형식](https://www.iana.org/assignments/media-types/media-types.xhtml)
9. [RFC 2397](https://tools.ietf.org/html/rfc2397)
10. [ISO 3166-1](https://www.iso.org/iso-3166-country-codes.html)
11. [적응형 카드](https://adaptivecards.io)

# <a name="appendix-i---changes"></a>부록 I - 변경 내용

## <a name="2018-02-07"></a>2018-02-07

* 초기 초안

# <a name="appendix-ii---non-iri-entity-types"></a>부록 II - 비 IRI 엔터티 형식

활동 [엔터티](#entity)는 사용자 위치, 사용하는 메시징 앱 버전 등 활동에 대한 추가 메타데이터를 전달합니다. 활동 형식은 IRI지만 몇 개의 비 IRI 이름도 일반적으로 사용됩니다. 이 부록은 지원되는 비 IRI 엔터티 형식의 전체 목록입니다.

| type           | 동등한 URI                          | 설명               |
| -------------- | --------------------------------------- | ------------------------- |
| GeoCoordinates | https://schema.org/GeoCoordinates       | Schema.org GeoCoordinates |
| 멘션        | https://botframework.com/schema/mention | @-mention                 |
| 위치          | https://schema.org/Place                | Schema.org place          |
| Thing          | https://schema.org/Thing                | Schema.org thing          |
| clientInfo     | 해당 없음                                     | Skype 클라이언트 정보         |

### <a name="clientinfo"></a>clientInfo

clientInfo 엔터티는 사용자 메시지를 보내는 데 사용되는 클라이언트 소프트웨어에 대한 확장 정보가 포함됩니다. 세 가지 속성을 포함하며, 모두 선택 사항입니다.

`R9201`: 봇이 `clientInfo` 엔터티를 보내면 안 됩니다.

`R9202`: 하나 이상의 필드가 채워진 경우에만 보낸 사람이 `clientInfo` 엔터티를 포함해야 합니다.

#### <a name="locale-deprecated"></a>로캘(사용되지 않음)

`locale` 필드에는 사용자 로캘이 포함됩니다. 이 필드는 활동 루트에 있는 [`locale`](#locale) 필드를 복제합니다. `locale` 필드의 값은 문자열에 있는 [ISO 639](https://www.iso.org/iso-639-language-codes.html)[[5](#references)] 코드입니다.

`clientInfo` 내의 `locale` 필드는 사용되지 않습니다.

`R9211`: 받는 사람이 `clientInfo` 개체 내의 `locale` 필드를 사용하면 안 됩니다.

`R9212`: 보낸 사람이 호환성을 위해 `clientInfo` 내의 `locale` 필드를 채울 수 있습니다. 이전 받는 사람과의 호환성이 필요하지 않은 경우 보낸 사람이 `locale` 속성을 보내면 안 됩니다.

#### <a name="country"></a>국가

`country` 필드에는 사용자의 검색된 위치가 포함됩니다. `country`는 검색되는 반면 `locale`은 일반적으로 사용자 또는 응용 프로그램 설정이기 때문에, 이 값은 [`locale`](#locale) 데이터와 다를 수 있습니다. `country` 필드의 값은 [ISO 3166-1](https://www.iso.org/iso-3166-country-codes.html)[[10](#references)] 2자 또는 3자 국가 코드입니다.

`R9220`: 채널이 클라이언트에서 `country` 필드의 값을 임의로 지정할 수 있도록 허용하면 안 됩니다. 채널이 GPS, 위치 API, IP 주소 검색 등의 메커니즘을 사용하여 요청을 생성하는 국가를 설정해야 합니다.

#### <a name="platform"></a>플랫폼

`platform` 필드는 활동을 생성하는 데 사용되는 메시징 클라이언트 플랫폼에 대해 설명합니다. `platform` 필드의 값은 문자열이며, 값을 보내는 채널에서 가능한 값 목록과 해당 의미가 정의됩니다.

영구적 채팅 피드를 사용하는 채널에서 `platform`은 일반적으로 포함할 콘텐츠를 결정하는 데만 유용하고, 해당 콘텐츠의 형식을 결정할 때는 유용하지 않습니다. 예를 들어, 모바일 장치의 사용자가 제품 지원 도움말을 요청하는 경우 봇이 해당 모바일 장치와 관련된 도움말을 생성할 수 있습니다. 그런 다음, 사용자는 PC에서 채팅 피드를 다시 열어 해당 화면에서 읽으면서 모바일 장치를 변경할 수 있습니다. 이 경우, `platform` 필드는 콘텐츠를 알리기 위한 것이지만, 다른 장치에서 콘텐츠를 볼 수 있어야 합니다.

`R9230`: 보내는 콘텐츠가 특정 장치에서만 표시됨을 알고 있는 경우가 아니면 봇이 `platform` 필드를 사용하여 응답 데이터의 서식을 제어하면 안 됩니다.

# <a name="appendix-iii---protocols-using-the-invoke-activity"></a>부록 III - 호출 활동을 사용하는 프로토콜

[호출 활동](#invoke-activity)은 Bot Framework 채널이 지원하는 프로토콜 내에서만 사용됩니다(즉, 제네릭 확장성 메커니즘이 아님). 이 부록에는 이 활동을 사용하는 모든 Bot Framework 프로토콜 목록이 포함되어 있습니다.

## <a name="payments"></a>지불

Bot Framework 결제 프로토콜은 호출을 사용하여 배송료 및 세금 비율을 계산하고 결제 완료의 강력한 확인을 전달합니다.

결제 프로토콜은 호출 활동의 `name` 필드에 정의된 세 가지 작업을 정의합니다.
* `payment/shippingAddressChange`
* `payment/shppingOptionsChange`
* `payment/paymentResponse`

자세한 내용은 [결제 요청](https://docs.microsoft.com/en-us/bot-framework/dotnet/bot-builder-dotnet-request-payment) 페이지에서 확인할 수 있습니다.

## <a name="teams-compose-extension"></a>Teams 작성 확장

Microsoft Teams 채널은 [작성 확장](https://docs.microsoft.com/en-us/microsoftteams/platform/concepts/messaging-extensions)에 대해 호출을 사용합니다. 이러한 호출 사용은 Microsoft Teams와 관련이 있습니다.



